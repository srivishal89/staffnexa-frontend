<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Staffnexa – Career Application</title>

<style>
/* --- KEEP YOUR EXISTING CSS (NO CHANGE) --- */
:root {
  --primary: #4f46e5;
  --primary-hover: #4338ca;
  --bg-gradient-start: #f3f4f6;
  --bg-gradient-end: #e5e7eb;
  --card-bg: #ffffff;
  --text-main: #1f2937;
  --text-muted: #6b7280;
  --border: #e5e7eb;
  --input-bg: #f9fafb;
  --input-focus-ring: rgba(79, 70, 229, 0.2);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
}

body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(135deg, #eef2f3 0%, #dbeafe 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container {
  max-width: 700px;
  width: 100%;
  background: white;
  border-radius: 20px;
  padding: 30px;
}

/* KEEP REST SAME */
</style>
</head>

<body>

<div class="container">

<form id="jobForm">

<input type="text" name="firstName" required placeholder="First Name">
<input type="text" name="lastName" required placeholder="Last Name">
<input type="tel" name="phone" required pattern="[0-9]{10}" maxlength="10">
<select name="role" required>
<option value="">Select Role</option>
<option>Housekeeping</option>
<option>Pantry</option>
<option>Supervisor</option>
</select>

<select name="location">
<option value="">Location</option>
<option>Noida</option>
<option>Delhi</option>
</select>

<input type="file" name="resume" required>

<button type="submit" id="submitBtn">Submit</button>

<div id="msg"></div>

</form>

</div>

<script>

const API_URL = "https://staffnexa-backend.onrender.com/candidates";

const form = document.getElementById("jobForm");
const submitBtn = document.getElementById("submitBtn");
const msg = document.getElementById("msg");

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    submitBtn.disabled = true;
    submitBtn.innerText = "Sending...";
    msg.innerHTML = "";
    msg.className = "";

    const f = e.target;
    const fd = new FormData();

    const fullName = (f.firstName.value + " " + f.lastName.value).trim();

    fd.append("name", fullName);
    fd.append("phone", f.phone.value);
    fd.append("role", f.role.value);
    fd.append("location", f.location.value || "");
    fd.append("resume", f.resume.files[0]);

    try {

        console.log("Sending request...");

        const res = await fetch(API_URL, {
            method: "POST",
            body: fd
        });

        console.log("Response:", res);

        const data = await res.json();

        if (!res.ok) {
            throw new Error(data.error || "Server Error");
        }

        msg.innerHTML = "✅ Application submitted successfully!";
        msg.className = "success";

        form.reset();

    } catch (err) {

        console.error("ERROR:", err);

        msg.innerHTML = "❌ " + err.message;
        msg.className = "error";
    }

    submitBtn.disabled = false;
    submitBtn.innerText = "Submit";

});

</script>

</body>
</html>
